/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/script.js":
/*!***********************!*\
  !*** ./src/script.js ***!
  \***********************/
/***/ (() => {

eval("\"Use strict\";\r\n\r\nlet orderKey = \"0\"\r\nlet sleutel = \"\";\r\nlet htmlString = \"\";\r\nlet movieList = [];\r\n// let sortedMovies = [];\r\n// let userInput = \"\";\r\n\r\nwindow.onload = async function () {\r\n    // await initWebsite();\r\n    await checkSwitchLogin();\r\n    initWebsite();\r\n    checkPages();\r\n}\r\n\r\nasync function getMovies() {\r\n    if (sessionStorage.login) {\r\n\r\n\r\n        await fetch(`https://web2-backend-sambuseyne.herokuapp.com/movies`)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                movieList = data;\r\n                console.log(\"Oops i did a fetchcall\");\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n//starting the website\r\nfunction initWebsite() {\r\n    if (!sessionStorage.login) {\r\n        document.getElementById(\"signUpButton\").addEventListener('click', async event => {\r\n            event.preventDefault();\r\n            let userDetails = await checkUserInput();\r\n            if (userDetails) {\r\n                login(userDetails[0], userDetails[1]);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n//get the userdata\r\nasync function checkUserInput() {\r\n    console.log(sessionStorage.login)\r\n    let email = document.getElementById(\"emailUser\").value;\r\n    let pass = document.getElementById(\"passwordUser\").value;\r\n    return [email, pass];\r\n}\r\n\r\n//login fetch\r\nfunction login(email, password) {\r\n    fetch(`https://web2-backend-sambuseyne.herokuapp.com/login`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                email: email,\r\n                password: password\r\n            })\r\n        })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            console.log(data);\r\n            if (data) {\r\n                sessionStorage.setItem(\"id\", data.id);\r\n                sessionStorage.setItem(\"login\", data.login);\r\n                window.location.href = \"../index.html\";\r\n                service.checkPages();\r\n            } else {\r\n                console.log('Wrong password or email!');\r\n            }\r\n        })\r\n}\r\n\r\n\r\n//listening to all the searchoptions on the advanced page if something is clicked\r\nfunction checkSortings(movieList) {\r\n    if (document.getElementById('releaseDate')) {\r\n        document.getElementById('releaseDate').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('releaseDate').id;\r\n            updateMovieList(movieList, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('mostViews')) {\r\n        document.getElementById('mostViews').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('mostViews').id;\r\n            updateMovieList(movieList, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('mostSearched')) {\r\n        document.getElementById('mostSearched').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('mostSearched').id;\r\n            updateMovieList(movieList, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('rating')) {\r\n        document.getElementById('rating').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('rating').id;\r\n            updateMovieList(movieList, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('trending')) {\r\n        document.getElementById('trending').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('trending').id;\r\n            updateMovieList(movieList, sortSetting);\r\n        })\r\n    }\r\n    if (document.getElementById('searchButton')) {\r\n        document.getElementById('searchButton').addEventListener('click', e => {\r\n            let input = document.getElementById('field').value;\r\n            updateMovieList(movieList, sortSetting);\r\n        })\r\n    }\r\n}\r\n\r\n//render the movies on the pages\r\nfunction renderMovies(movies) {\r\n    let movieHTML = \"\";\r\n    movies.forEach(m => {\r\n        movieHTML += `\r\n    <div class=\"movieContainer\">\r\n    <figure>\r\n    <img src=\"${m.poster}\" alt=\"${m.name}\">\r\n    </figure>\r\n    <p>${m.name}</p>\r\n    <p>${m.director}</p>\r\n    <p>${m.year}</p>\r\n    <p>Views: ${m.views}</p>\r\n    <p>Searches: ${m.searches}</p>\r\n    <p>Rating: ${m.rating}/100</p>\r\n    <p>Trending: ${m.trending}</p>\r\n    </div>`\r\n        document.getElementById('resultsContainer').innerHTML = movieHTML;\r\n    });\r\n\r\n}\r\n\r\n//sort movies when loading in the first time\r\nfunction sortMovies(movieList, sortSetting) {\r\n    if (sortSetting == \"year\") {\r\n        movieList.sort((a, b) => {\r\n            return b.year - a.year;\r\n        })\r\n    }\r\n}\r\n\r\n//big sorting machine, sort/filter the movies and put them in new list\r\nfunction updateMovieList(movies, sortSetting) {\r\n\r\n    let newList = [];\r\n    if (sortSetting == \"releaseDate\" && orderKey == \"0\") {\r\n        movies.sort((a, b) => {\r\n            return a.year - b.year\r\n\r\n        });\r\n        newList = movies;\r\n        orderKey = \"1\";\r\n    } else if (sortSetting == \"releaseDate\" && orderKey == \"1\") {\r\n        movies.sort((a, b) => {\r\n            return b.year - a.year\r\n\r\n        });\r\n        newList = movies;\r\n        orderKey = \"0\";\r\n\r\n    } else if (sortSetting == \"rating\") {\r\n        movies.forEach(m => {\r\n            if (m.rating) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return b.rating - a.rating\r\n        })\r\n\r\n    } else if (sortSetting == \"mostSearched\") {\r\n        movies.forEach(m => {\r\n            if (m.searches) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return b.searches - a.searches\r\n        })\r\n    } else if (sortSetting == \"trending\") {\r\n        movies.forEach(m => {\r\n            if (m.trending) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n    } else if (sortSetting == \"mostViews\") {\r\n        movies.forEach(m => {\r\n            if (m.view) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return b.view - a.view\r\n        })\r\n    }\r\n    console.log(movies);\r\n    console.log(newList)\r\n    renderMovies(newList);\r\n}\r\n\r\n//change login form\r\nasync function checkSwitchLogin() {\r\n    if (!sessionStorage.login) {\r\n        document.getElementById(\"loginPage\").addEventListener('click', event => {\r\n            console.log(event.target.className)\r\n            if (event.target.className =  true && sleutel == 0) {\r\n                htmlString = \"\"\r\n                htmlString += `\r\n                    <div id=\"loginSection\">\r\n                        <p>Create a new account</p>\r\n                        <form action=\"\" id=\"loginForm\">\r\n                            <input type=\"text\" id=\"emailUser\" placeholder=\"Email\">\r\n                            <input type=\"text\" id=\"passwordUser\" placeholder=\"Password\">\r\n                        </form>\r\n                        <button id=\"signUpButton\">Sign</button>\r\n                    </div>\r\n                    `;\r\n                document.getElementById('loginContainer').innerHTML = htmlString;\r\n                sleutel = 1;\r\n            } else if (event.target.className =  true && sleutel == 1) {\r\n                htmlString = \"\"\r\n                htmlString += `\r\n                    <div id=\"loginSection\">\r\n                        <form action=\"\" id=\"loginForm\">\r\n                            <input type=\"text\" id=\"emailUser\" placeholder=\"Email\">\r\n                            <input type=\"text\" id=\"passwordUser\" placeholder=\"Password\">\r\n                        </form>\r\n                        <button id=\"signUpButton\">Login</button>\r\n                    </div>\r\n                    `;\r\n                document.getElementById('loginContainer').innerHTML = htmlString;\r\n                sleutel = 0;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\nfunction loadUserBasedContent(guide) {\r\n    console.log(\"You are logged in bro!\")\r\n    if (guide == \"watch\") {\r\n        console.log(\"Let's show the watchlist page\")\r\n    } else if (guide == \"shuffle\") {\r\n        console.log(\"Let's show the shuffle page\")\r\n        getMovies()\r\n    } else if (guide == \"advanced\") {\r\n        console.log(\"Let's show the advanced page\")\r\n        getMovies()\r\n        sortMovies(movieList, \"year\");\r\n        renderMovies(movieList);\r\n        checkSortings(movieList);\r\n    } else if (guide == \"info\") {\r\n        console.log(\"Let's show the info page\")\r\n    } else if (guide == \"login\") {\r\n        console.log(\"Let's show the login page\")\r\n    } else if (guide == \"index\") {\r\n        console.log(\"Let's show the homepage\")\r\n    }\r\n}\r\n\r\n\r\n//check on which pages the user => load code according to the page\r\nfunction checkPages() {\r\n    if (document.URL.includes(\"shuffle\")) {\r\n        console.log(\"you are on the shuffle pages\")\r\n        loadUserBasedContent(\"shuffle\");\r\n\r\n    } else if (document.URL.includes(\"advanced\")) {\r\n        console.log(\"you are on the advanced pages\")\r\n        loadUserBasedContent(\"advanced\");\r\n\r\n    } else if (document.URL.includes(\"index\")) {\r\n        console.log(\"you are on the home pages\")\r\n        loadUserBasedContent(\"index\");\r\n\r\n    } else if (document.URL.includes(\"watchlist\")) {\r\n        console.log(\"you are on the watchlist pages\")\r\n        loadUserBasedContent(\"watch\");\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const service = {\r\n\r\n//     sortedMovies: [],\r\n//     input: \"\",\r\n//     check: \"\",\r\n//     year: \"\",\r\n\r\n\r\n//     init() {\r\n//         this.checkPages()\r\n//         this.checkSwitchLogin()\r\n//         this.checkSearchCriteria();\r\n//         sortedMovies = [];\r\n//     },\r\n\r\n//     checkSearchCriteria() {\r\n//         window.onclick = e => {\r\n//             let searchOption = e.target.id;\r\n//             this.advancedSearch(this.input, this.check, this.year, searchOption)\r\n//             // console.log(this.input, this.check, this.year, searchOption);\r\n//         }\r\n//     },\r\n\r\n//     async checkPages() {\r\n//         let shuffle = document.getElementById('shuffleButton')\r\n//         let advanced = document.getElementById('searchButton')\r\n//         if (shuffle) {\r\n//             this.shuffleFunction()\r\n//         } else if (advanced) {\r\n//             this.checkInputUser()\r\n//         }\r\n//     },\r\n\r\n//     shuffleFunction() {\r\n//         let url = `https://web2-backend-sambuseyne.herokuapp.com/movies`;\r\n\r\n//         document.getElementById('shuffleButton').addEventListener('click', () => {\r\n\r\n\r\n//             fetch(url)\r\n//                 .then(response => {\r\n//                     return response.json();\r\n//                 })\r\n//                 .then(data => {\r\n//                     htmlString = \"\";\r\n//                     data.sort(() => Math.random() - 0.5);\r\n//                     data = data.slice(0, 3);\r\n//                     console.log(data);\r\n//                     for (let m of data) {\r\n//                         htmlString +=\r\n//                             `<div class=\"moviePoster\">\r\n//                             <figure id=\"${m.name}\">\r\n//                             <img src=\"${m.poster}\" alt=\"${m.name}\">\r\n//                         </figure>\r\n//                         <div class=\"movieInfoSection\">\r\n//                             <p>${m.name}</p>\r\n//                             <p>${m.year}</p>\r\n//                             <button class=\"addButton\">+</button>\r\n//                         </div>\r\n//                         </div>`;\r\n//                     }\r\n//                     document.getElementById('shuffle').innerHTML = htmlString;\r\n//                 })\r\n//         });\r\n//     },\r\n\r\n\r\n//         if (check) {\r\n//             console.log(check)\r\n//             document.getElementById('searchButton').addEventListener('click', () => {\r\n//                 fetch(`https://web2-backend-sambuseyne.herokuapp.com/movies`)\r\n//                     .then(response => {\r\n//                         return response.json();\r\n//                     })\r\n//                     .then(data => {\r\n//                         console.log(data);\r\n\r\n//                         let sortedMovies = data.filter(function (data) {\r\n//                             return data.genres == check\r\n//                         })\r\n\r\n//                         sortedMovies.forEach(function (m) {\r\n//                             htmlString = \"\";\r\n//                             htmlString +=\r\n//                                 `\r\n//                         <div class=\"movieContainer\">\r\n//                         <figure>\r\n//                         <img src=\"${m.poster}\" alt=\"${m.name}\">\r\n//                         </figure>\r\n//                         <p>${m.name}</p>\r\n//                         <p>${m.director}</p>\r\n//                         <p>${m.year}</p>\r\n//                         </div>`;\r\n//                             document.getElementById('resultsContainer').innerHTML = htmlString;\r\n//                         })\r\n//                     })\r\n//             });\r\n\r\n//         }\r\n//         if (sort) {\r\n\r\n//         }\r\n\r\n\r\n//     checkInputUser() {\r\n//         document.getElementById('buttonSection').addEventListener('click', () => {\r\n//             let selection = document.getElementById('yearList');\r\n//             let selectionResult = selection.options[selection.selectedIndex].value;\r\n//             if (document.querySelector('.genre:checked')) {\r\n//                 let checkedBoxes = document.querySelector('.genre:checked').value;\r\n//                 let userInput = null;\r\n//                 this.advancedSearch(userInput, checkedBoxes)\r\n//             } else if (document.getElementById(\"field\").value) {\r\n//                 userInput = document.getElementById(\"field\").value;\r\n//                 let checkedBoxes = null;\r\n//                 this.advancedSearch(userInput, checkedBoxes)\r\n//             } else if (!selectionResult == \"0\") {\r\n//                 let userInput = null;\r\n//                 let checkedBoxes = null;\r\n//                 let selection = document.getElementById('yearList');\r\n//                 let selectionResult = selection.options[selection.selectedIndex].value;\r\n//                 this.advancedSearch(userInput, checkedBoxes, selectionResult);\r\n//             } else {\r\n//                 let userInput = null;\r\n//                 let checkedBoxes = null;\r\n//                 let selectionResult = null;\r\n//                 this.advancedSearch(userInput, checkedBoxes, selectionResult);\r\n//             }\r\n//         })\r\n//     },\r\n\r\n\r\n\r\n\r\n\r\n\r\n// }\r\n\r\n// service.init()\n\n//# sourceURL=webpack://web2-frontend-sambuseyne/./src/script.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/script.js"]();
/******/ 	
/******/ })()
;