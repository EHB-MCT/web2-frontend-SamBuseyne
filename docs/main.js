/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/script.js":
/*!***********************!*\
  !*** ./src/script.js ***!
  \***********************/
/***/ (() => {

eval("\"Use strict\";\r\n\r\nlet orderKey = \"0\"\r\nlet sleutel = \"\";\r\nlet htmlString = \"\";\r\nlet url = `https://web2-backend-sambuseyne.herokuapp.com/movies`;\r\nlet movies = []\r\n\r\nsetup()\r\n\r\nfunction setup() {\r\n    initWebsite();\r\n    checkLoginState();\r\n    checkSwitchLogin();\r\n    checkPages();\r\n    changeProfile();\r\n}\r\n\r\n\r\nfunction checkLoginState() {\r\n    if (sessionStorage.id || sessionStorage.name || sessionStorage.login) {\r\n        //hier all functies runnen wanneer user ingelogd is\r\n        console.log(\"running userbased functions\")\r\n    }\r\n}\r\n\r\nfunction logOut() {\r\n    if (sessionStorage.name) {\r\n        document.getElementById(\"logOut\").addEventListener('click', e => {\r\n            sessionStorage.clear();\r\n            window.location.href = \"../index.html\";\r\n        })\r\n    }\r\n\r\n}\r\n\r\nfunction changeProfile() {\r\n    if (sessionStorage.name && !document.URL.includes(\"index\")) {\r\n        let listItem = document.querySelector(\"a:last-child\")\r\n        let newItem = document.createElement('a');\r\n        newItem.innerHTML = `<a id=\"profileName\" href=\"../html/profile.html\">${sessionStorage.name}</a>`;\r\n        listItem.parentNode.replaceChild(newItem, listItem);\r\n    } else if (document.URL.includes(\"index\") && sessionStorage.name) {\r\n        let listItem = document.querySelector(\"a:last-child\")\r\n        let newItem = document.createElement('a');\r\n        newItem.innerHTML = `<a id=\"profileName\" href=\"./html/profile.html\">${sessionStorage.name}</a>`;\r\n        listItem.parentNode.replaceChild(newItem, listItem);\r\n    }\r\n}\r\n\r\nasync function getMovies() {\r\n\r\n    if (sessionStorage.login) {\r\n\r\n        await fetch(`https://web2-backend-sambuseyne.herokuapp.com/movies`)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                movies = data;\r\n                console.log(\"Oops i did a fetchcall\");\r\n                // renderMovies(movies);\r\n            })\r\n    }\r\n\r\n    if (document.getElementById('releaseDate')) {\r\n        document.getElementById('releaseDate').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('releaseDate').id;\r\n            updateMovieList(movies, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('mostViews')) {\r\n        document.getElementById('mostViews').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('mostViews').id;\r\n            updateMovieList(movies, sortSetting);\r\n            console.log(\"views\")\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('mostSearched')) {\r\n        document.getElementById('mostSearched').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('mostSearched').id;\r\n            updateMovieList(movies, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('rating')) {\r\n        document.getElementById('rating').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('rating').id;\r\n            updateMovieList(movies, sortSetting);\r\n        })\r\n    }\r\n\r\n    if (document.getElementById('trending')) {\r\n        document.getElementById('trending').addEventListener('click', e => {\r\n            let sortSetting = document.getElementById('trending').id;\r\n            updateMovieList(movies, sortSetting);\r\n        })\r\n    }\r\n    if (document.getElementById('searchButton')) {\r\n        document.getElementById('searchButton').addEventListener('click', e => {\r\n            console.log(\"search button clicked\")\r\n            let sortSetting = document.getElementById('searchButton').id;\r\n            let input = document.getElementById('field').value;\r\n            console.log(sortSetting, input);\r\n            updateMovieList(movies, sortSetting, input);\r\n        })\r\n    }\r\n    if (document.getElementById(\"yearList\")) {\r\n\r\n    }\r\n}\r\n\r\n\r\n//starting the website\r\nfunction initWebsite() {\r\n    if (!sessionStorage.login && document.getElementById(\"loginButton\")) {\r\n        document.getElementById(\"loginButton\").addEventListener('click', async event => {\r\n            event.preventDefault();\r\n            let userDetails = await checkUserInput();\r\n            if (userDetails) {\r\n                login(userDetails[0], userDetails[1]);\r\n            }\r\n        });\r\n    } else if (!sessionStorage.login && document.getElementById(\"signUpButton\")) {\r\n        console.log(\"signup\")\r\n        document.getElementById(\"signUpButton\").addEventListener('click', async event => {\r\n            event.preventDefault();\r\n            console.log(\"signup\")\r\n            //     let userDetails = await checkUserInput();\r\n            //     if (userDetails) {\r\n            //         login(userDetails[0], userDetails[1]);\r\n            //     }\r\n        });\r\n    }\r\n}\r\n\r\n//get the userdata\r\nasync function checkUserInput() {\r\n    console.log(sessionStorage.login)\r\n    let email = document.getElementById(\"emailUser\").value;\r\n    let pass = document.getElementById(\"passwordUser\").value;\r\n    return [email, pass];\r\n}\r\n\r\n//login fetch\r\nfunction login(email, password) {\r\n    fetch(`https://web2-backend-sambuseyne.herokuapp.com/login`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                email: email,\r\n                password: password\r\n            })\r\n        })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            console.log(data);\r\n            if (data) {\r\n                sessionStorage.setItem(\"id\", data.id);\r\n                sessionStorage.setItem(\"login\", data.login);\r\n                sessionStorage.setItem(\"name\", data.name);\r\n                window.location.href = \"../index.html\";\r\n            } else {\r\n                console.log('Wrong password or email!');\r\n            }\r\n        })\r\n}\r\n\r\n//render the movies on the pages\r\nfunction renderMovies(movies) {\r\n    console.log(\"rendering\");\r\n    let movieHTML = \"\";\r\n    movies.forEach(m => {\r\n        movieHTML += `\r\n        <div class=\"movieContainer\">\r\n        <a href=\"../html/info.html\">\r\n        <figure>\r\n            <img src=\"${m.poster}\" alt=\"${m.name}\">\r\n        </figure>\r\n        </a>\r\n        <div class=\"moviePosterContainer\">\r\n            <p>${m.name}</p>\r\n            <p>${m.director}</p>\r\n            <p>${m.year}</p>\r\n            <div class=\"infoS\">\r\n                <div class=\"infoS1\">\r\n                    <p>Views: ${m.views}</p>\r\n                    <p>Searches: ${m.searches}</p>\r\n                </div>\r\n                <div class=\"infoS2\">\r\n                    <p>Rating: ${m.rating}/100</p>\r\n                    <p>Trending: ${m.trending}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button class=\"addFavourite\">+</button>\r\n    </div>\r\n\r\n`\r\n        document.getElementById('resultsContainer').innerHTML = movieHTML;\r\n    });\r\n}\r\n\r\n\r\nfunction shuffleFunction() {\r\n    document.getElementById('shuffleButton').addEventListener('click', () => {\r\n        let newList = [];\r\n        htmlString = \"\";\r\n        movies.sort(() => Math.random() - 0.5);\r\n        newList = movies.slice(0, 3);\r\n        for (let m of newList) {\r\n            htmlString += `\r\n            <div class=\"movieContainer\">\r\n                <a href=\"../html/info.html\">\r\n                <figure>\r\n                    <img src=\"${m.poster}\" alt=\"${m.name}\">\r\n                </figure>\r\n                </a>\r\n                <div class=\"moviePosterContainer\">\r\n                    <p>${m.name}</p>\r\n                    <p>${m.director}</p>\r\n                    <p>${m.year}</p>\r\n                    <div class=\"infoS\">\r\n                        <div class=\"infoS1\">\r\n                            <p>Views: ${m.views}</p>\r\n                            <p>Searches: ${m.searches}</p>\r\n                        </div>\r\n                        <div class=\"infoS2\">\r\n                            <p>Rating: ${m.rating}/100</p>\r\n                            <p>Trending: ${m.trending}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button class=\"addFavourite\">+</button>\r\n            </div>`;\r\n            document.getElementById('shuffle').innerHTML = htmlString;\r\n        }\r\n    });\r\n}\r\n\r\n//sort movies when loading in the first time\r\nfunction sortMovies(movies, sortSetting) {\r\n    if (sortSetting == \"year\") {\r\n        movies.sort((a, b) => {\r\n            return b.year - a.year;\r\n        });\r\n    }\r\n}\r\n\r\n//big sorting machine, sort/filter the movies and put them in new list\r\nfunction updateMovieList(movies, sortSetting, input) {\r\n    let newList = [];\r\n    if (sortSetting == \"releaseDate\" && orderKey == \"0\") {\r\n        movies.sort((a, b) => {\r\n            return a.year - b.year\r\n\r\n        });\r\n        newList = movies;\r\n        orderKey = \"1\";\r\n\r\n    } else if (sortSetting == \"releaseDate\" && orderKey == \"1\") {\r\n        movies.sort((a, b) => {\r\n            return b.year - a.year\r\n\r\n        });\r\n        newList = movies;\r\n        orderKey = \"0\";\r\n\r\n    } else if (sortSetting == \"rating\" && orderKey == \"0\") {\r\n        console.log(\"let's go down\")\r\n        movies.forEach(m => {\r\n            if (m.rating) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return b.rating - a.rating\r\n        });\r\n        orderKey = \"1\";\r\n\r\n\r\n    } else if (sortSetting == \"rating\" && orderKey == \"1\") {\r\n        console.log(\"let's go up\")\r\n        movies.forEach(m => {\r\n            if (m.rating) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return a.rating - b.rating\r\n        });\r\n        orderKey = \"0\";\r\n\r\n    } else if (sortSetting == \"mostSearched\" && orderKey == \"0\") {\r\n        movies.forEach(m => {\r\n            if (m.searches) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return b.searches - a.searches\r\n        })\r\n    } else if (sortSetting == \"trending\" && orderKey == \"0\") {\r\n        movies.forEach(m => {\r\n            if (m.trending == \"yes\") {\r\n                newList.push(m)\r\n\r\n            }\r\n        })\r\n    } else if (sortSetting == \"mostViews\" && orderKey == \"0\") {\r\n        movies.forEach(m => {\r\n            if (m.views) {\r\n                newList.push(m)\r\n            }\r\n        })\r\n        newList.sort((a, b) => {\r\n            return b.view - a.view\r\n        })\r\n    } else if (sortSetting == \"searchButton\") {\r\n        movies.forEach(m => {\r\n            let movieTitle = m.name\r\n            let title = movieTitle.toLowerCase()\r\n            if (title.includes(input.toLowerCase())) {\r\n                newList.push(m)\r\n            } else {\r\n                //render message => no movies found\r\n            }\r\n        })\r\n    }\r\n    renderMovies(newList);\r\n}\r\n\r\n//change login form\r\nasync function checkSwitchLogin() {\r\n    if (!sessionStorage.login) {\r\n        document.getElementById(\"loginPage\").addEventListener('click', event => {\r\n            console.log(event.target.className)\r\n            if (event.target.className =  true && sleutel == 0) {\r\n                htmlString = \"\"\r\n                htmlString += `\r\n                    <div id=\"loginSection\">\r\n                        <p>Create a new account</p>\r\n                        <form action=\"\" id=\"loginForm\">\r\n                            <input type=\"text\" id=\"emailUser\" placeholder=\"Email\">\r\n                            <input type=\"password\" id=\"passwordUser\" placeholder=\"Password\">\r\n                            <input type=\"password\" id=\"passwordUserConfirmation\" placeholder=\"Confirm Password\">\r\n                        </form>\r\n                        <button id=\"signUpButton\">Sign</button>\r\n                    </div>\r\n                    `;\r\n                document.getElementById('loginContainer').innerHTML = htmlString;\r\n                sleutel = 1;\r\n            } else if (event.target.className =  true && sleutel == 1) {\r\n                htmlString = \"\"\r\n                htmlString += `\r\n                    <div id=\"loginSection\">\r\n                        <form action=\"\" id=\"loginForm\">\r\n                            <input type=\"text\" id=\"emailUser\" placeholder=\"Email\">\r\n                            <input type=\"text\" id=\"passwordUser\" placeholder=\"Password\">\r\n                        </form>\r\n                        <button id=\"loginButton\">Login</button>\r\n                    </div>\r\n                    `;\r\n                document.getElementById('loginContainer').innerHTML = htmlString;\r\n                sleutel = 0;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction addFavourite() {\r\n    document.getElementById(\"shufflePage\").addEventListener('click', event => {\r\n        const favourite = event.target.className.indexOf(\"movieContainer\");\r\n        if (favourite) {\r\n            if (event.target.className.indexOf('addFavourite') !== -1) {\r\n                console.log(\"got add button!\")\r\n                //function that shows message (added movie) and function that adds movie to the userdata\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // document.querySelectorAll('.addFavourite').addEventListener('click', e => {\r\n    //     e.preventDefault();\r\n    //     console.log(\"added to favourites\")\r\n    // })\r\n\r\n}\r\n\r\n\r\nfunction loadUserBasedContent(guide) {\r\n    console.log(\"You are logged in bro!\")\r\n    if (guide == \"watch\") {\r\n        console.log(\"Let's show the watchlist page\")\r\n    } else if (guide == \"shuffle\") {\r\n        getMovies()\r\n        shuffleFunction(movies, null, null);\r\n        addFavourite();\r\n    } else if (guide == \"advanced\") {\r\n        getMovies();\r\n        updateMovieList(movies, null, null);\r\n        addFavourite();\r\n        // checkSortings(movies);\r\n    } else if (guide == \"info\") {\r\n        console.log(\"Let's show the info page\")\r\n    } else if (guide == \"login\") {\r\n        console.log(\"Let's show the login page\")\r\n    } else if (guide == \"index\") {\r\n        console.log(\"Let's show the homepage\")\r\n    } else if (guide == \"profile\") {\r\n        console.log(\"Let's show the profile page\")\r\n        logOut();\r\n    }\r\n}\r\n\r\n\r\n\r\n//check on which pages the user => load code according to the page\r\nfunction checkPages() {\r\n    if (document.URL.includes(\"shuffle\")) {\r\n        loadUserBasedContent(\"shuffle\");\r\n    } else if (document.URL.includes(\"advanced\")) {\r\n        loadUserBasedContent(\"advanced\");\r\n    } else if (document.URL.includes(\"index\")) {\r\n        loadUserBasedContent(\"index\");\r\n    } else if (document.URL.includes(\"watchlist\")) {\r\n        loadUserBasedContent(\"watch\");\r\n    } else if (document.URL.includes(\"profile\")) {\r\n        loadUserBasedContent(\"profile\");\r\n    }\r\n}\r\n\r\n\r\n// const service = {\r\n\r\n//     sortedMovies: [],\r\n//     input: \"\",\r\n//     check: \"\",\r\n//     year: \"\",\r\n\r\n\r\n//     init() {\r\n//         this.checkPages()\r\n//         this.checkSwitchLogin()\r\n//         this.checkSearchCriteria();\r\n//         sortedMovies = [];\r\n//     },\r\n\r\n//     checkSearchCriteria() {\r\n//         window.onclick = e => {\r\n//             let searchOption = e.target.id;\r\n//             this.advancedSearch(this.input, this.check, this.year, searchOption)\r\n//             // console.log(this.input, this.check, this.year, searchOption);\r\n//         }\r\n//     },\r\n\r\n\r\n\r\n//         if (check) {\r\n//             console.log(check)\r\n//             document.getElementById('searchButton').addEventListener('click', () => {\r\n//                 fetch(`https://web2-backend-sambuseyne.herokuapp.com/movies`)\r\n//                     .then(response => {\r\n//                         return response.json();\r\n//                     })\r\n//                     .then(data => {\r\n//                         console.log(data);\r\n\r\n//                         let sortedMovies = data.filter(function (data) {\r\n//                             return data.genres == check\r\n//                         })\r\n\r\n//                         sortedMovies.forEach(function (m) {\r\n//                             htmlString = \"\";\r\n//                             htmlString +=\r\n//                                 `\r\n//                         <div class=\"movieContainer\">\r\n//                         <figure>\r\n//                         <img src=\"${m.poster}\" alt=\"${m.name}\">\r\n//                         </figure>\r\n//                         <p>${m.name}</p>\r\n//                         <p>${m.director}</p>\r\n//                         <p>${m.year}</p>\r\n//                         </div>`;\r\n//                             document.getElementById('resultsContainer').innerHTML = htmlString;\r\n//                         })\r\n//                     })\r\n//             });\r\n\r\n//         }\r\n//         if (sort) {\r\n\r\n//         }\r\n\r\n\r\n//     checkInputUser() {\r\n//         document.getElementById('buttonSection').addEventListener('click', () => {\r\n//             let selection = document.getElementById('yearList');\r\n//             let selectionResult = selection.options[selection.selectedIndex].value;\r\n//             if (document.querySelector('.genre:checked')) {\r\n//                 let checkedBoxes = document.querySelector('.genre:checked').value;\r\n//                 let userInput = null;\r\n//                 this.advancedSearch(userInput, checkedBoxes)\r\n//             } else if (document.getElementById(\"field\").value) {\r\n//                 userInput = document.getElementById(\"field\").value;\r\n//                 let checkedBoxes = null;\r\n//                 this.advancedSearch(userInput, checkedBoxes)\r\n//             } else if (!selectionResult == \"0\") {\r\n//                 let userInput = null;\r\n//                 let checkedBoxes = null;\r\n//                 let selection = document.getElementById('yearList');\r\n//                 let selectionResult = selection.options[selection.selectedIndex].value;\r\n//                 this.advancedSearch(userInput, checkedBoxes, selectionResult);\r\n//             } else {\r\n//                 let userInput = null;\r\n//                 let checkedBoxes = null;\r\n//                 let selectionResult = null;\r\n//                 this.advancedSearch(userInput, checkedBoxes, selectionResult);\r\n//             }\r\n//         })\r\n//     },\n\n//# sourceURL=webpack://web2-frontend-sambuseyne/./src/script.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/script.js"]();
/******/ 	
/******/ })()
;